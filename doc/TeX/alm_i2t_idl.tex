% -*- LaTeX -*-


\sloppy

\title{\healpix IDL Facility User Guidelines}
\docid{alm\_i2t} \section[alm\_i2t]{ }
\label{idl:alm_i2t}
\docrv{Version 1.0}
\author{Eric Hivon}
\abstract{This document describes the \healpix IDL facility alm\_i2t.}

\begin{facility}
{This IDL function turns an indexed list of alm (as generated by
\htmlref{fits2alm}{idl:fits2alm}) into a tabular (real or complex) a(l,m) array for easier manipulation%
}
{src/idl/misc/alm\_i2t.pro}
\end{facility}

\begin{IDLformat}
{%\mylink{idl:alm_i2t:beam}
{alm\_table}=\thedocid(%
\mylink{idl:alm_i2t:index}{Index}, 
\mylink{idl:alm_i2t:alm_vec}{Alm\_vec},
[%
\mylink{idl:alm_i2t:complex}{/COMPLEX},
\mylink{idl:alm_i2t:help}{/HELP},
\mylink{idl:alm_i2t:lmax}{LMAX=},
\mylink{idl:alm_i2t:mmax}{MMAX=}%
])}
\end{IDLformat}

\begin{qualifiers}
  \begin{qulist}{} %%%% NOTE the ``extra'' brace here %%%%
    \item[Index] \mytarget{idl:alm_i2t:index}
Integer vector of size ni containing the index $i$ of the 
            of $a_{lm}$ coefficients, related to $\{l,m\}$ by 
             $i = l^2 + l + m + 1$
    \item[Alm\_vec] \mytarget{idl:alm_i2t:alm_vec}%
Array of $a_{lm}$ coefficients, with dimension (ni, nalm [,nsig])
     where\\
           ni   = number of $i$ indices\\
           nalm = 2 for real and imaginary parts of alm coefficients {\em or}\\
                  4 for above plus corresponding error values\\
           nsig = number of signals (usually 1 for any of T E B
                  or 3 for T,E,B together)
\end{qulist}
\end{qualifiers}

\begin{keywords}
  \begin{kwlist}{} %%% extra brace
    \item[/COMPLEX] \mytarget{idl:alm_i2t:complex}%
if set, the output array is complex with dimensions
          (lmax+1, mmax+1, [nalm/2 , nsig]),\\
      otherwise, the array is real with dimensions
          (lmax+1, mmax+1, nalm [, nsig]). \\
{\tt lmax} and {\tt mmax} are determined from input {\tt Index} values, unless set otherwise
by user.
    \item[/HELP] \mytarget{idl:alm_i2t:help}%
	if set, prints out the help header and exits
    \item[LMAX=] \mytarget{idl:alm_i2t:lmax}%
{\tt lmax} to be used in output array, regardless of
      value found in input index
    \item[MMAX=] \mytarget{idl:alm_i2t:mmax}%
{\tt mmax} to be used in output array, regardless of
      value found in input index
  \end{kwlist}
\end{keywords}  

\begin{codedescription}
{%
\thedocid\ returns a real or complex array, containing the $a_{lm}$ with
$0 \le l \le l_{\rm max}$ and $0 \le m \le m_{\rm max}$. The negative $m$ are
therefore ignored.
}
\end{codedescription}



\begin{related}
  \begin{sulist}{} %%%% NOTE the ``extra'' brace here %%%%
    \item[idl] version \idlversion or more is necessary to run \thedocid.
    \item[\htmlref{alm\_t2i}{idl:alm_t2i}] turns tabular alm's such as those generated by
\thedocid\ into indexed lists than can written to FITS files with
\htmlref{alm2fits}{idl:alm2fits}
  \item[\htmlref{alm2fits}{idl:alm2fits}, \htmlref{fits2alm}{idl:fits2alm}]
routines to read and write $a_{lm}$ indexed lists from and to FITS files.
  \end{sulist}
\end{related}

\mytarget{idl:alm_i2t:example}
\begin{example}
{%
\begin{tabular}{ll}   %%%% use this tabular format %%%%
\htmlref{fits2alm}{idl:fits2alm}, i1, a1, 'alm1.fits'                       \\
ac1 = alm\_i2t(i1, a1, /complex, lmax=100, mmax=100) \\
\  \\
\htmlref{fits2alm}{idl:fits2alm}, i2, a2, 'alm2.fits'\\
ac2 = alm\_i2t(i2, a2, /complex, lmax=100, mmax=100)\\
\  \\
ac = 0.9*ac1 + 0.1*ac2          \\
\   \\
\htmlref{alm\_t2i}{idl:alm_t2i}, ac, i, a \\
\htmlref{alm2fits}{idl:alm2fits}, i, a, 'almsum.fits' 
\end{tabular}
}%
{%
The example above reads 2 sets of $a_{lm}$ from FITS files, puts the alm's with (l,m)
$\le 100$ in tabular arrays, and then make a weighted sum of the alm's. The
resulting alm or put back into a indexed list in order to be written to FITS.
}
\end{example}


